# 游戏攻略/STG常用工具/VsyncPatch/vpatch_readme_th13

<!-- source html: G:\repos\THBWiki-Markdown-Builder\THBWikiMarkdown\Temp\main\8\89\ns0%3A%E6%B8%B8%E6%88%8F%E6%94%BB%E7%95%A5%2FSTG%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%2FVsyncPatch%2Fvpatch_readme_th13.html -->

使用了翻译表的页面

- 纯文本格式（Wiki系统将从本页面下方的翻译表中自动获取内容并拼接成纯文本格式的页面）

: [日文版](http://omake.thwiki.cc/translate.php?u=游戏攻略/STG常用工具/VsyncPatch/vpatch_readme_th13&amp;t=ja)
: [汉化版](http://omake.thwiki.cc/translate.php?u=游戏攻略/STG常用工具/VsyncPatch/vpatch_readme_th13&amp;t=zh)

  
  

  


<table><tbody><tr class="tt-content" id="=-1" data-pos="&#91;&quot;=&quot;,1&#93;"><td class="tt-ja" lang="ja"><div class="poem">VsyncPatch</div></td><td class="tt-zh" lang="zh"><div class="poem">VsyncPatch<br></div></td></tr><tr class="tt-content" id="=-2" data-pos="&#91;&quot;=&quot;,2&#93;"><td class="tt-ja" lang="ja"><div class="poem">基本的な使用方法は、VsyncPatch rev6と同じです<br>使用方法の詳細は、rev6のreadmeを御覧下さい</div></td><td class="tt-zh" lang="zh"><div class="poem"></div></td></tr><tr class="tt-content" id="=-3" data-pos="&#91;&quot;=&quot;,3&#93;"><td class="tt-ja" lang="ja"><div class="poem">■対応OS<br>確認済：Windows XP SP3 32bit版<br>非対応：NT系のAPIを使用しているため、95/98/Meは動作不可能</div></td><td class="tt-zh" lang="zh"><div class="poem"></div></td></tr><tr class="tt-content" id="=-4" data-pos="&#91;&quot;=&quot;,4&#93;"><td class="tt-ja" lang="ja"><div class="poem">■対応ゲーム<br>東方神霊廟 ver1.00c</div></td><td class="tt-zh" lang="zh"><div class="poem"></div></td></tr><tr class="tt-content" id="=-5" data-pos="&#91;&quot;=&quot;,5&#93;"><td class="tt-ja" lang="ja"><div class="poem">■警告<br>本非公式パッチは、ゲームの内部動作を大幅に変更します<br>本パッチを当てると不具合がでるかもしれません<br>実行前にscore.dat等をバックアップすることを推奨します<br>また、十分に動作確認をした上でご使用ください<br>特に本パッチを使用した状態でリプレイを保存、公開される方はご注意ください<br>本パッチ適用時のリプレイに関しては、東方Projectスコアボードに投稿することはできません<br>リプレイをwebやuploder等で公開する場合は、VsyncPatchを使用していることを明記すると、<br>トラブルになりにくいかと思います<br>本パッチは非公式に作成したものです<br>公式に問い合わせないようにお願いします</div></td><td class="tt-zh" lang="zh"><div class="poem"></div></td></tr><tr class="tt-content" id="=-6" data-pos="&#91;&quot;=&quot;,6&#93;"><td class="tt-ja" lang="ja"><div class="poem">■再配布<br>ご自由に再配布してくださってかまいません<br>ただし、zip内のファイルを変更・追加せず<br>そのままの状態で再配布をお願いします</div></td><td class="tt-zh" lang="zh"><div class="poem"></div></td></tr><tr class="tt-content" id="=-7" data-pos="&#91;&quot;=&quot;,7&#93;"><td class="tt-ja" lang="ja"><div class="poem">■インストール<br>vpatch.exe、vpatch_th??.dll、vpatch.iniのファイルを<br>東方シリーズをインストールしたフォルダにコピーしてください<br>iniファイルは無くても一応動作します</div></td><td class="tt-zh" lang="zh"><div class="poem"></div></td></tr><tr class="tt-content" id="=-8" data-pos="&#91;&quot;=&quot;,8&#93;"><td class="tt-ja" lang="ja"><div class="poem">東方神霊廟の場合はvpatch.exeとvpatch_th13.dllとvpatch.ini</div></td><td class="tt-zh" lang="zh"><div class="poem"></div></td></tr><tr class="tt-content" id="=-9" data-pos="&#91;&quot;=&quot;,9&#93;"><td class="tt-ja" lang="ja"><div class="poem">※パッチの動作不良で、score.dat等がおかしくなる可能性もあるかもしれません<br>※念のためバックアップをとってからパッチを実行するようにしてください<br>※vpatch.exeは、vpatchという名のつくdllを同じフォルダ内で検索し、<br>※最初に見つかったdllをロードします<br>※したがって、同じフォルダ内に別のvpatch dllがあると、うまく起動できません<br>※東方シリーズをインストールしたフォルダには、<br>※対応しているdllのみを入れるようにしてください</div></td><td class="tt-zh" lang="zh"><div class="poem"></div></td></tr><tr class="tt-content" id="=-10" data-pos="&#91;&quot;=&quot;,10&#93;"><td class="tt-ja" lang="ja"><div class="poem">■アンインストール<br>インストール時にコピーしたexeとdll及びiniファイルを削除してください</div></td><td class="tt-zh" lang="zh"><div class="poem"></div></td></tr><tr class="tt-content" id="=-11" data-pos="&#91;&quot;=&quot;,11&#93;"><td class="tt-ja" lang="ja"><div class="poem">■iniファイル<br>[Option]<br>Vsync (デフォルト=0)<br>　0を指定すると垂直同期をせずに、描画を行います。<br><br>　1を指定すると独自の方法でソフトウェア的に垂直同期を取り、描画を行います。<br>　ハードウェア的に行う垂直同期よりも低入力遅延で操作が可能です。<br>　フレームレートは、モニタのリフレッシュレートと同じになります。<br>　Vsync=1にしてもティアリング(ちらつき)が発生する場合は、<br>　LockBackBuffer=1 と D3DMultiThread=1 と ProcessPriority=2 を設定してみてください。<br><br>　-1の場合、ハードウェアの支援を使用して垂直同期を行います。フルスクリーン時のみ有効です。<br>　ハードウェアの支援を使用しているため、完璧な垂直同期が可能です。<br>　-1の設定では、2フレーム以上の遅延が起きないように、タイミングを調節しつつ描画します。<br>　そのため、フレームレートが異様に低くなるシーンがあるかもしれませんが、Vsync=-2 よりも入力遅延は少ないです。<br>　ウィンドウモード時の場合に-1を指定した場合や、フルスクリーン時にハードウェアの支援が利用できない場合は、<br>　強制的に Vsync=1 の設定で動作します。<br><br>　-2の場合、ハードウェアの支援を使用して垂直同期を行います。フルスクリーン時のみ有効です。<br>　ハードウェアの支援を使用しているため、完璧な垂直同期が可能です。<br>　-2の設定では、ゲームループにwaitを入れずに全力で回すようにします。<br>　フレームレートは、ハードウェア側(ドライバ)の実装に依存します。<br>　Vsync=-2は、Vsyncのすべての設定の中で最もフレームレートが高くなると思われる設定です。<br>　ただし同時に、Vsyncのすべての設定の中で最も入力遅延が多い設定です。<br>　ウィンドウモード時の場合に-2を指定した場合や、フルスクリーン時にハードウェアの支援が利用できない場合は、<br>　強制的に Vsync=1 の設定で動作します。</div></td><td class="tt-zh" lang="zh"><div class="poem"></div></td></tr><tr class="tt-content" id="=-12" data-pos="&#91;&quot;=&quot;,12&#93;"><td class="tt-ja" lang="ja"><div class="poem">D3DMultiThread (デフォルト=0)<br>　Direct3Dをマルチスレッドで動作させた場合に発生する不具合を無くすためのオプションです。<br>　0の場合は、何もしません。<br><br>　1の場合、IDirect3D9::CreateDevice() のBehaviorFlagsに、D3DCREATE_MULTITHREADEDを指定するようにします。<br>　このフラグを指定すると、マルチスレッドでDirect3Dを使用する際に不正終了しなくなります。<br><br>　ゲーム起動時にタイトル画面がバグったような感じになることがある場合は、D3DMultiThread=1 を指定すると、直ります。<br>　1を指定することを強く推奨しますが、CPU負荷が増え、フレームレートが低下する環境があるかもしれません。<br><br>　LockBackBuffer=1 にする場合は、マルチスレッドでの不具合を無くすために、できるだけ D3DMultiThread=1 を設定してください。<br>　Vsync=1 の場合は、ソフトウェアvsyncを行うためのヘルパースレッドを作成するため、できるだけ D3DMultiThread=1 を設定してください。</div></td><td class="tt-zh" lang="zh"><div class="poem"></div></td></tr><tr class="tt-content" id="=-13" data-pos="&#91;&quot;=&quot;,13&#93;"><td class="tt-ja" lang="ja"><div class="poem">MagnificationMethod (デフォルト=0)<br>　0の場合は、何もしません<br>　windowモード時、規定のサイズ(640x480)よりも大きいウィンドウサイズ(例1024x768等)にした場合、<br>　ポイントサンプリングで拡大されてしまう環境があります(Windows7＆特定のグラフィックカード時、等)<br>　ポイントサンプリングで拡大すると、見た目がとても荒く、汚く見える場合があります<br>　MagnificationMethod=1 にするとバイリニアフィルタリングで拡大するようにします<br>　バイリニアフィルタリングで拡大すると、それなりに綺麗に拡大されます<br>　このオプションを有効にすると、バックバッファのサイズをウィンドウサイズと同じにし、<br>　ゲーム画面を640x480のテクスチャに描画したあと、バックバッファにウィンドウサイズと同じサイズのポリゴンを描画し、<br>　それにゲーム画面のテクスチャを貼り付けます(Direct3Dの機能で自動的にゲーム画面が拡大されます)<br>　上記の処理により、VRAM使用量が増加し、テクスチャを描画するためのメモリコピーの時間分、処理時間が増えます<br>　最近のグラフィックカードなら全く気にならない程度の処理時間の増加ですが、古いカードの場合はそうではないかもしれません<br>　※この機能はvpatchのwindowサイズ変更機能を使用している場合のみ、機能します<br>　※このオプションは動作確認が不十分かもしれません。描画等に不具合が出る可能性があるかもしれません。</div></td><td class="tt-zh" lang="zh"><div class="poem"></div></td></tr><tr class="tt-content" id="=-14" data-pos="&#91;&quot;=&quot;,14&#93;"><td class="tt-ja" lang="ja"><div class="poem">DisableChecksum (デフォルト=0)<br>　東方の実行ファイルであるth13.exeのチェックサムを確認するかどうかの設定です<br>　1を設定すると、チェックサムを確認せずにvpatchを適用し、東方を起動します<br>　通常はこのオプションを変更する必要はありません<br>　東方の実行ファイルに何らかの非公式パッチ(言語パッチ・不具合解消パッチ等)を当てた場合は、このオプションを1にしてください<br>　1に設定した場合、vpatchが正常に動作するかどうかはわかりません<br>　※vpatchが適用できない場合は、まず、ゲームのバージョンが対応verであるかどうかを確認してください</div></td><td class="tt-zh" lang="zh"><div class="poem"></div></td></tr><tr class="tt-content" id="=-15" data-pos="&#91;&quot;=&quot;,15&#93;"><td class="tt-ja" lang="ja"><div class="poem">■version履歴<br>2011/10/31 rev th13-1<br>　・東方神霊廟に対応<br>　　すべての描画間隔に対応済<br>　・東方神霊廟以外に対応したvpatchは同梱していません<br>　・ini項目追加：MagnificationMethod<br>　・ini項目追加：DisableChecksum<br>　・ini項目変更：Vsync<br>　　-1の設定を変更、-2の設定を追加<br>　　ハードウェアvsyncに対応し、フレームレート制御はすべてvpatch側で行うようにしました<br>　・ini項目削除：HookDirectInput<br>　　現在別の方法で同等のオプションを実装中ですが、<br>　　まだ実用段階では無いため、一時的にこのオプションを削除しました<br>　・動作変更：ゲームの実行ファイル(th??.exe)のバージョンチェックを追加 (DisableChecksumオプションでoffに変更可能)<br>　　違うバージョンでvpatchを起動しようとした場合、「ゲームの実行ファイルが見つかりませんでした」と表示し、起動できないようにしました<br>　　vpatch.exeは以前のverをそのまま使用可能です<br>　・フレームレート制御ライブラリ更新<br>　　WaitableTimerの精度確認処理：低精度なのか高精度なのかの判別処理をより正確にできるようにコードを変更<br>　　浮動小数点を使用する処理をすべて整数演算で行うように変更<br>　　ハードウェアvsync関連の処理を追加<br>　　vsync=0の時、特定の条件で1frameだけ描画が早くなってしまうことがあったのを修正</div></td><td class="tt-zh" lang="zh"><div class="poem"></div></td></tr><tr class="tt-content" id="=-16" data-pos="&#91;&quot;=&quot;,16&#93;"><td class="tt-ja" lang="ja"><div class="poem">■ToDo<br>　・すべての東方作品における、入力デバイス処理のバグ修正(hook)の一元化及び対応デバイス・対応軸の拡充等<br>　　すべての入力デバイスに対応<br>　　デバイス上のすべての軸・ボタン・コントロールに対応<br>　　必要なデバイスのみPollし、処理時間を最小化 (HookDirectInputはすべてのデバイスをPollしていた)<br>　　デバイス入力を直接内部フラグに高速変換 (HookDirectInputは使用しない軸データの変換をしたり、無意味な変換を挟んでいた)<br>　　アサイン変更のためのGUIを実装<br>　・ヘルプの作成<br>　　東方がどのように動作するか(＝内部仕様の解説)<br>　　各種バグが発生するメカニズム<br>　　バグをどのようにvpatchで修正しているか<br>　　用語説明やFAQ等の追加<br>　・神霊廟にて、ロード画面中(特にエンディング後のロード中)にメモリアクセスエラーが起こる問題を修正したい<br>　　多少調査はしたものの、落ちる条件が未だ不明(なかなか落ちない)<br>　　エンディングまで行く手間もあり難航<br>　　タイトルロード時に落ちる条件はおそらく判明(再現性100%)</div></td><td class="tt-zh" lang="zh"><div class="poem"></div></td></tr><tr class="tt-content" id="=-17" data-pos="&#91;&quot;=&quot;,17&#93;"><td class="tt-ja" lang="ja"><div class="poem">■作者<br>◆swmpLV/75E</div></td><td class="tt-zh" lang="zh"><div class="poem"></div></td></tr><tr class="tt-content" id="=-18" data-pos="&#91;&quot;=&quot;,18&#93;"><td class="tt-ja" lang="ja"><div class="poem">■連絡先<br>バグ等の御報告はこちらからどうぞ<br><a rel="nofollow" class="external free" href="http://ux.getuploader.com/swmplv75e/inquire">http://ux.getuploader.com/swmplv75e/inquire</a></div></td><td class="tt-zh" lang="zh"><div class="poem"></div></td></tr></tbody></table>


  
  

  





---

此文档由 [THBWiki-Markdown-Builder](https://github.com/Delsin-Yu/THBWiki-Markdown-Builder) 构建。

文档中的所有内容除特殊注明外，均在 [**知识共享(Creative Commons) 署名-非商业性使用-相同方式共享 3.0 协议**](https://creativecommons.org/licenses/by-sa/3.0/deed.zh-hans) 下提供，附加条款亦可能应用。

引用类型与其他类型作品版权归原作者所有，如有作者授权则遵照授权协议使用。

详细请查阅 [THBWiki：免责声明](https://thbwiki.cc/THBWiki:%E5%85%8D%E8%B4%A3%E5%A3%B0%E6%98%8E)。

